{"version":3,"sources":["components/Profile/ProfileInfo/ProfileInfo.module.css","components/Profile/Posts/Posts.module.css","components/Profile/Posts/Post/Post.module.css","components/Profile/ProfileInfo/ProfileStatusWithHooks.tsx","components/Profile/ProfileInfo/ProfileDataForm.tsx","components/Profile/ProfileInfo/ProfileInfo.tsx","components/Profile/Posts/Post/Post.tsx","components/Profile/Posts/AddPostForm/AddPostForm.tsx","components/Profile/Posts/Posts.tsx","components/Profile/Posts/PostsContainer.tsx","components/Profile/Profile.tsx","components/Profile/ProfileContainer.tsx"],"names":["module","exports","ProfileStatusWithHooks","props","useState","editMode","setEditMode","status","setStatus","useEffect","onDoubleClick","onBlur","updateStatus","onChange","e","currentTarget","value","autoFocus","ProfileDataFormReduxForm","reduxForm","form","handleSubmit","profile","error","onSubmit","className","errorStyle","formSummaryError","createField","Input","Textarea","Object","keys","contacts","map","key","style","contact","ProfileData","isOwner","toEditMode","onClick","fullName","aboutMe","lookingForAJob","lookingForAJobDescription","contactTitle","contactValue","Contact","ProfileInfo","savePhoto","saveProfile","info","src","photos","large","userPhoto","picture","alt","type","target","files","length","initialValues","formData","then","Post","item","message","likes","maxLength50","maxLengthCreator","AddPostReduxForm","required","addPostButton","PostsMemorized","React","memo","postsElements","posts","post","likesCount","id","values","addPost","postText","profileActions","PostsContainer","connect","state","Posts","Profile","Preloader","ProfileContainer","userId","this","match","params","myId","history","push","getUserProfile","getUserStatus","console","refreshProfile","prevProps","prevState","updateUserStatus","Component","compose","auth","isAuth","withRouter","withAuthRedirect"],"mappings":"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","file":"static/js/4.5e40a5c3.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"picture\":\"ProfileInfo_picture__2dqFd\",\"info\":\"ProfileInfo_info__1Yp8A\",\"fullName\":\"ProfileInfo_fullName__2lhA9\",\"contact\":\"ProfileInfo_contact__1k5zQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"posts\":\"Posts_posts__11wDi\",\"addPostButton\":\"Posts_addPostButton__36-5P\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"Post_item__3z9fn\"};","import React, {useState, useEffect, ChangeEvent} from \"react\";\r\n\r\ntype PropsType = {\r\n    status: string\r\n    updateStatus: (status: string) => void\r\n}\r\n\r\nconst ProfileStatusWithHooks: React.FC<PropsType> = (props) => {\r\n    let [editMode, setEditMode] = useState(false);\r\n    let [status, setStatus] = useState(props.status);\r\n\r\n    useEffect(() => {\r\n        setStatus(props.status);\r\n    }, [props.status]);\r\n\r\n    const activateEditMode = () => {\r\n        setEditMode(true);\r\n    };\r\n\r\n    const deactivateEditMode = () => {\r\n        setEditMode(false);\r\n        props.updateStatus(status);\r\n    };\r\n\r\n    const onStatusChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n        setStatus(e.currentTarget.value);\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            {!editMode &&\r\n            <div>\r\n                <span onDoubleClick={activateEditMode}><b>Status</b>: {props.status || 'No Status'}</span>\r\n            </div>\r\n            }\r\n            {editMode &&\r\n            <div onBlur={deactivateEditMode}>\r\n                <input onChange={onStatusChange} autoFocus={true} value={status}/>\r\n            </div>\r\n            }\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default ProfileStatusWithHooks;","import React from 'react'\r\nimport style from './ProfileInfo.module.css';\r\nimport errorStyle from '../../Common/FormsControls/FormsControls.module.css'\r\nimport {createField, Input, Textarea} from '../../Common/FormsControls/FormsControls';\r\nimport {InjectedFormProps, reduxForm} from 'redux-form';\r\nimport {ProfileType} from \"../../../types/types\";\r\n\r\ntype PropsType = {\r\n    profile: ProfileType | null\r\n}\r\ntype ProfileKeysType = Extract<keyof ProfileType, string>\r\n\r\nconst ProfileDataForm: React.FC<InjectedFormProps<ProfileType, PropsType> & PropsType> =\r\n    ({handleSubmit, profile, error}) => {\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            <div>\r\n                <button>Save</button>\r\n            </div>\r\n            {error &&\r\n            <div className={errorStyle.formSummaryError}>\r\n                {error}\r\n            </div>}\r\n            <div>\r\n                <b>Full name</b>: {createField<ProfileKeysType>\r\n            ('Full name', 'fullName', Input, [])}\r\n            </div>\r\n            <div>\r\n                <b>About me</b>: {createField<ProfileKeysType>\r\n            ('About me', 'aboutMe', Textarea, [])}\r\n            </div>\r\n            <div>\r\n                <b>Looking for a job</b>: {createField<ProfileKeysType>\r\n            ('', 'lookingForAJob', Input, [], 'checkbox')}\r\n            </div>\r\n            <div>\r\n                <b>My professional\r\n                    skills</b>: {createField<ProfileKeysType>\r\n            ('My Professional skills', 'lookingForAJobDescription', Textarea, [])}\r\n            </div>\r\n            <div>\r\n                <b>Contacts</b>: {profile && Object.keys(profile.contacts).map(key => {\r\n                return (\r\n                    <div className={style.contact} key={key}>\r\n                        {/*Затипизировать!!!*/}\r\n                        <b>{key}</b>: {createField(key, `contacts.${key}`, Input, [])}\r\n                    </div>\r\n                )\r\n            })}\r\n            </div>\r\n        </form>\r\n    )\r\n};\r\n\r\nconst ProfileDataFormReduxForm = reduxForm<ProfileType, PropsType>({form: 'edit-profile'})(ProfileDataForm);\r\n\r\nexport default ProfileDataFormReduxForm;","import React, {useState} from 'react';\r\nimport style from './ProfileInfo.module.css';\r\nimport userPhoto from '../../../assets/images/userPhoto.png';\r\nimport ProfileStatusWithHooks from \"./ProfileStatusWithHooks\";\r\nimport ProfileDataForm from \"./ProfileDataForm\";\r\nimport {PropsType} from \"../Profile\";\r\nimport {ContactsType, ProfileType} from \"../../../types/types\";\r\n\r\nconst ProfileInfo: React.FC<PropsType> = ({profile, status, updateStatus, isOwner, savePhoto, saveProfile}) => {\r\n    let [editMode, setEditMode] = useState(false);\r\n\r\n    const onMainPhotoSelected = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        if(e.target.files?.length) {\r\n            savePhoto(e.target.files[0])\r\n        }\r\n    };\r\n\r\n    const toEditMode = () => {\r\n        setEditMode(true)\r\n    };\r\n\r\n    const onSubmit = (formData: ProfileType) => {\r\n        saveProfile(formData)\r\n            .then(() => {\r\n                setEditMode(false)\r\n        });\r\n    };\r\n\r\n    return (\r\n        <div className={style.info}>\r\n            <img src={profile?.photos.large || userPhoto} className={style.picture} alt={'userPhoto'}/>\r\n            {isOwner && <input type={'file'} onChange={onMainPhotoSelected}/>}\r\n\r\n            {editMode\r\n                ? <ProfileDataForm initialValues={profile as ProfileType} onSubmit={onSubmit} profile={profile}/>\r\n                : <ProfileData profile={profile}\r\n                               isOwner={isOwner}\r\n                               toEditMode={toEditMode}/>}\r\n\r\n            <ProfileStatusWithHooks status={status} updateStatus={updateStatus}/>\r\n        </div>\r\n    )\r\n};\r\n\r\ntype ProfileDataPropsType = {\r\n    profile: ProfileType | null\r\n    isOwner: boolean\r\n    toEditMode: () => void\r\n}\r\n\r\nconst ProfileData: React.FC<ProfileDataPropsType> = ({profile, isOwner, toEditMode}) => {\r\n    return (\r\n        <div>\r\n            {isOwner &&\r\n            <div>\r\n                <button onClick={toEditMode}>Edit</button>\r\n            </div>}\r\n            <div className={style.fullName}>\r\n                {profile?.fullName}\r\n            </div>\r\n            <div>\r\n                <b>About me</b>: {profile?.aboutMe || ' '}\r\n            </div>\r\n            <div>\r\n                <b>Looking for a job</b>: {profile?.lookingForAJob ? 'yes' : 'no'}\r\n            </div>\r\n            <div>\r\n                <b>My profesional skills</b>: {profile?.lookingForAJobDescription}\r\n            </div>\r\n            <div>\r\n                <b>Contacts</b>: {profile && Object.keys(profile.contacts).map(key => {\r\n                return <Contact key={key} contactTitle={key} contactValue={profile.contacts[key as keyof ContactsType]}/>\r\n            })}\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n\r\ntype ContactPropsType = {\r\n    contactTitle: string\r\n    contactValue: string\r\n}\r\n\r\nconst Contact: React.FC<ContactPropsType> = ({contactTitle, contactValue}) => {\r\n    return (\r\n        <div className={style.contact}>\r\n            <b>{contactTitle}</b>: {contactValue}\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default ProfileInfo;","import React from 'react';\r\nimport style from './Post.module.css';\r\nimport userPhoto from '../../../../assets/images/userPhoto.png';\r\n\r\ntype PropsType = {\r\n    message: string\r\n    likes: number\r\n    id: number\r\n}\r\n\r\nconst Post: React.FC<PropsType> = (props) => {\r\n    return (\r\n            <div className={style.item}>\r\n                <img src={userPhoto} alt={'userPhoto'}/>\r\n                {props.message}\r\n                <div>\r\n                    {props.likes} like\r\n                </div>\r\n            </div>\r\n    )\r\n};\r\n\r\nexport default Post;","import {InjectedFormProps, reduxForm} from \"redux-form\";\r\nimport {createField, Textarea} from \"../../../Common/FormsControls/FormsControls\";\r\nimport {maxLengthCreator, required} from \"../../../../utils/validators/validators\";\r\nimport style from \"../Posts.module.css\";\r\nimport React from \"react\";\r\n\r\nconst maxLength50 = maxLengthCreator(50);\r\n\r\nexport type NewPostFormValuesType = {\r\n    postText: string\r\n}\r\ntype NewPostFormValuesKeysType = Extract<keyof NewPostFormValuesType, string>\r\ntype PropsType = {}\r\n\r\nconst AddPostForm: React.FC<InjectedFormProps<NewPostFormValuesType, PropsType> & PropsType> = (props) => {\r\n    return (\r\n        <form onSubmit={props.handleSubmit}>\r\n            <div>\r\n                {createField<NewPostFormValuesKeysType>\r\n                ('Write post', 'postText', Textarea, [required, maxLength50])}\r\n            </div>\r\n            <div>\r\n                <button className={style.addPostButton}>Add Post</button>\r\n            </div>\r\n        </form>\r\n    )\r\n};\r\n\r\nconst AddPostReduxForm = reduxForm<NewPostFormValuesType, PropsType>({form: 'addPost'})(AddPostForm);\r\n\r\nexport default AddPostReduxForm","import React from 'react';\r\nimport style from './Posts.module.css';\r\nimport Post from \"./Post/Post\";\r\nimport AddPostReduxForm, { NewPostFormValuesType } from \"./AddPostForm/AddPostForm\";\r\nimport {MapDispatchPropsType, MapStatePropsType} from \"./PostsContainer\";\r\n\r\ntype PropsType = MapStatePropsType & MapDispatchPropsType\r\n\r\nconst Posts: React.FC<PropsType> = (props) => {\r\n    let postsElements = props.posts\r\n        .map(post => <Post message={post.message} likes={post.likesCount} key={post.id} id={post.id}/>);\r\n\r\n    let onAddPost = (values: NewPostFormValuesType) => {\r\n        props.addPost(values.postText);\r\n    };\r\n\r\n    return (\r\n        <div className={style.posts}>\r\n            <AddPostReduxForm onSubmit={onAddPost}/>\r\n            <div>\r\n                {postsElements}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst PostsMemorized = React.memo(Posts);\r\n\r\nexport default PostsMemorized","import {profileActions} from \"../../../Redux/profile-reducer\";\r\nimport Posts from \"./Posts\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppStateType} from \"../../../Redux/redux-store\";\r\nimport {PostType} from \"../../../types/types\";\r\n\r\nexport type MapStatePropsType = {\r\n    posts: Array<PostType>\r\n}\r\nexport type MapDispatchPropsType = {\r\n    addPost: (postText: string) => void\r\n}\r\n\r\nlet mapStateToProps = (state: AppStateType): MapStatePropsType => {\r\n    return {\r\n        posts: state.profile.posts\r\n    }\r\n};\r\n\r\nconst {addPost} = profileActions\r\n\r\nconst PostsContainer = connect<MapStatePropsType, MapDispatchPropsType, {}, AppStateType>\r\n(mapStateToProps, {addPost})(Posts);\r\n\r\nexport default PostsContainer;","import React from 'react';\r\nimport ProfileInfo from \"./ProfileInfo/ProfileInfo\";\r\nimport PostsContainer from \"./Posts/PostsContainer\";\r\nimport Preloader from \"../Common/Preloader/Preloader\";\r\nimport { ProfileType } from '../../types/types';\r\n\r\nexport type PropsType = {\r\n    profile: ProfileType | null\r\n    status: string\r\n    updateStatus: (status: string) => void\r\n    isOwner: boolean\r\n    savePhoto: (photo: File) => void\r\n    saveProfile: (profile: ProfileType) => Promise<any>\r\n}\r\n\r\nconst Profile: React.FC<PropsType> = (props) => {\r\n    if(!props.profile) {\r\n        return(\r\n            <Preloader/>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <ProfileInfo profile={props.profile}\r\n                         status={props.status}\r\n                         updateStatus={props.updateStatus}\r\n                         isOwner={props.isOwner}\r\n                         savePhoto={props.savePhoto}\r\n                         saveProfile={props.saveProfile}/>\r\n            <PostsContainer />\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default Profile;","import React from 'react';\r\nimport Profile from \"./Profile\";\r\nimport {connect} from \"react-redux\";\r\nimport {getUserProfile, getUserStatus, savePhoto, saveProfile, updateUserStatus} from \"../../Redux/profile-reducer\";\r\nimport {withRouter, RouteComponentProps} from \"react-router-dom\";\r\nimport withAuthRedirect from \"../../hoc/withAuthRedirect\";\r\nimport {compose} from \"redux\";\r\nimport { ProfileType } from '../../types/types';\r\nimport {AppStateType} from \"../../Redux/redux-store\";\r\n\r\ntype PathParamsType = {\r\n    userId: string\r\n}\r\ntype MapStatePropsType = {\r\n    profile: ProfileType | null\r\n    status: string\r\n    myId: number | null\r\n    isAuth: boolean\r\n}\r\n\r\ntype MapDispatchPropsType = {\r\n    getUserProfile: (userId: number) => void\r\n    getUserStatus: (userId: number) => void\r\n    updateUserStatus: (status: string) => void\r\n    savePhoto: (photo: File) => void\r\n    saveProfile: (profile: ProfileType) => Promise<any>\r\n}\r\n\r\ntype PropsType = MapStatePropsType & MapDispatchPropsType & RouteComponentProps<PathParamsType>\r\n\r\nclass ProfileContainer extends React.Component<PropsType>{\r\n    refreshProfile () {\r\n        let userId: number | null = +this.props.match.params.userId;\r\n        if(!userId) {\r\n            userId = this.props.myId;\r\n            if(!userId) {\r\n                this.props.history.push('/login')\r\n            }\r\n        }\r\n        if(!userId) {\r\n            console.error('ID should exist in URL params or in state (\"authorizedUserId\")')\r\n        } else {\r\n            this.props.getUserProfile(userId as number);\r\n            this.props.getUserStatus(userId as number)\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.refreshProfile()\r\n    }\r\n\r\n    componentDidUpdate(prevProps: PropsType, prevState: MapStatePropsType) {\r\n        if (this.props.match.params.userId !== prevProps.match.params.userId) {\r\n            this.refreshProfile()\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {}\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Profile {...this.props}\r\n                         profile={this.props.profile}\r\n                         status={this.props.status}\r\n                         updateStatus={this.props.updateUserStatus}\r\n                         isOwner={!this.props.match.params.userId}\r\n                         savePhoto={this.props.savePhoto}\r\n                         saveProfile={this.props.saveProfile}/>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nlet mapStateToProps = (state: AppStateType): MapStatePropsType => {\r\n    return {\r\n        profile: state.profile.profile,\r\n        status: state.profile.status,\r\n        myId: state.auth.userId,\r\n        isAuth: state.auth.isAuth\r\n    }\r\n};\r\n\r\n//const { } =\r\n\r\nexport default compose<React.ComponentType>(\r\n    connect/*<MapStatePropsType, MapDispatchPropsType, {}, AppStateType>*/\r\n    (mapStateToProps, {getUserProfile, getUserStatus, updateUserStatus, savePhoto, saveProfile}),\r\n    withRouter,\r\n    withAuthRedirect\r\n)(ProfileContainer);\r\n"],"sourceRoot":""}